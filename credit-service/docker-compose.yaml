version: '3'
services:
  credit-service:
    container_name: credit-service
    build:
        context: .
        dockerfile: Dockerfile
    image: credit-service:latest
    ports:
      - "8100:8100"
    depends_on:
      - credit-db
    networks:
      - credit-network
    environment:
      - SPRING_PROFILES_ACTIVE=deploy
      - CREDIT_DB_HOST=credit-db
      - CREDIT_DB_PORT=5432
      - CREDIT_DB_USERNAME=credit-db
      - CREDIT_DB_PASSWORD=db_@password

  credit-db:
    image: 'postgres:15.3-alpine'
    container_name: credit-service-db
    ports:
      - "5432:5432"
    networks:
      - credit-network
    environment:
      - POSTGRES_USER=credit-db
      - POSTGRES_PASSWORD=db_@password

networks:
  credit-network: